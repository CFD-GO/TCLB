filename=$1
test -z "${filename}" && exit -1
test -f "${filename}" || exit -1
test -z "$(which indent)" && exit 0
extension="${filename##*.}"
if test "x${extension}" = "xcu" || test "x${extension}" = "xc" || test "x${extension}" = "xcpp"
then
	mv ${filename} ${filename}_
	indent -l800 -kr -sob ${filename}_
	cat ${filename}_ | sed 's/\([<]..*[<].*\)>>/\1 > >/g' > ${filename}
	rm ${filename}_
fi
