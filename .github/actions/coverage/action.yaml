name: 'TCLB Coverage'
description: 'This action gatheres coverage data for TCLB'
outputs:
  empty:
    description: "Is the report empty"
    value: ${{ steps.gather.outputs.empty }}
runs:
  using: 'composite'
  steps:
    - shell: bash
      id: gather
      run: |
        lcov --capture --directory . --output-file coverage.info
        if test -s coverage.info
        then
          lcov --remove coverage.info '/usr/*' --output-file coverage.info
          lcov --list coverage.info
          echo "empty=true" >> $GITHUB_OUTPUT
        else
          echo "empty=false" >> $GITHUB_OUTPUT
        fi
